-- Auto Spam M1 (multi schedule, standalone)

local FIRE_INTERVAL = 0.9

local schedule = {
    {11, 16},
    {25, 30},
    {39, 44},
}

-- Tìm remote
local remote
pcall(function()
    local rs = game:GetService("ReplicatedStorage")
    local bridge = rs:FindFirstChild("BridgeNet2")
    if bridge then
        remote = bridge:FindFirstChild("dataRemoteEvent")
    end
    if not remote then
        for _, v in ipairs(rs:GetDescendants()) do
            if v.Name == "dataRemoteEvent" then
                remote = v
                break
            end
        end
    end
end)

local function safeFire()
    if remote and buffer and buffer.fromstring then
        pcall(function()
            remote:FireServer(
                { { buffer.fromstring("\019\000\000\0000201000111271509104\000") }, "\028" },
                game:GetService("Players"):WaitForChild("naisjo1234567").Character
            )
        end)
    else
        if not safeFire._warned then
            safeFire._warned = true
            warn("[Auto Spam M1] remote hoặc buffer.fromstring không khả dụng.")
        end
    end
end

local tick0 = tick()

for i, window in ipairs(schedule) do
    local start_time, end_time = window[1], window[2]
    if type(start_time) == "number" and type(end_time) == "number" and end_time > start_time then
        task.spawn(function()
            local wait_time = tick0 + start_time - tick()
            if wait_time > 0 then task.wait(wait_time) end

            print(("[Auto Spam M1] #%d BẬT (%.1fs → %.1fs)"):format(i, start_time, end_time))

            while tick() < tick0 + end_time do
                safeFire()
                task.wait(FIRE_INTERVAL)
            end

            print(("[Auto Spam M1] #%d TẮT (%.1fs)"):format(i, end_time))
        end)
    else
        warn(("[Auto Spam M1] Schedule #%d không hợp lệ (start=%s, end=%s)")
            :format(i, tostring(start_time), tostring(end_time)))
    end
end
