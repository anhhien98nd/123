-- üå∏ Auto TP1 Lock 3 Giai ƒêo·∫°n (M·ªëc th·ªùi gian tuy·ªát ƒë·ªëi)
local Players = game:GetService("Players")
local p = Players.LocalPlayer
local STATE = { tp1 = false }

-- ‚è≥ Ch·ªù character v√† HumanoidRootPart s·∫µn s√†ng
local function waitForHRP()
	local chr = p.Character or p.CharacterAdded:Wait()
	local hrp = chr:FindFirstChild("HumanoidRootPart")
	local waited = 0
	while not hrp and waited < 5 do
		task.wait(0.2)
		waited += 0.2
		chr = p.Character or p.CharacterAdded:Wait()
		hrp = chr:FindFirstChild("HumanoidRootPart")
	end
	return hrp
end

-- üîí H√†m b·∫Øt ƒë·∫ßu lock v·ªã tr√≠
local function startLock(pos)
	if STATE.tp1 then return end
	STATE.tp1 = true
	print("[AUTO] üîí B·∫Øt ƒë·∫ßu lock v·ªã tr√≠ t·∫°i:", tostring(pos))

	local hrp = waitForHRP()
	local look
	if hrp then
		pcall(function()
			look = hrp.CFrame.LookVector
		end)
	end

	task.spawn(function()
		while STATE.tp1 do
			task.wait()
			local c = p.Character
			if c then
				local h = c:FindFirstChild("HumanoidRootPart")
				if h then
					pcall(function()
						h.Velocity = Vector3.new(0, 0, 0)
						if look then
							h.CFrame = CFrame.new(pos, pos + look)
						else
							h.CFrame = CFrame.new(pos)
						end
					end)
				end
			end
		end
	end)
end

-- üîì H√†m d·ª´ng lock
local function stopLock()
	if STATE.tp1 then
		STATE.tp1 = false
		print("[AUTO] üîì D·ª´ng lock v·ªã tr√≠.")
	end
end

-- üïí Chu·ªói theo m·ªëc th·ªùi gian tuy·ªát ƒë·ªëi
task.spawn(function()
	local pos = Vector3.new(40, 3.63, -130.14)

	local timeline = {
		{9,  "start"},
		{53, "stop"},
		{62, "start"},
		{116,"stop"},
		{127,"start"},
		{181,"stop"},
	}

	print("[AUTO] ‚è≥ B·∫Øt ƒë·∫ßu chu·ªói TP1 Lock...")

	local last = 0
	for _, step in ipairs(timeline) do
		local t, action = step[1], step[2]
		task.wait(t - last)
		last = t

		if action == "start" then
			startLock(pos)
			print("[AUTO] ‚ñ∂ TP1 Lock t·∫°i " .. t .. "s")
		else
			stopLock()
			print("[AUTO] ‚èπ Stop TP1 Lock t·∫°i " .. t .. "s")
		end
	end

	print("[AUTO] ‚úÖ Ho√†n t·∫•t 3 giai ƒëo·∫°n TP1 Lock.")
end)
